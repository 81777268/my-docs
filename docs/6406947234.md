<!--
 * @Author: your name
 * @Date: 2021-05-18 10:40:49
 * @LastEditTime: 2021-05-18 18:32:08
 * @LastEditors: Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: /my-docs/docs/6406947234.md
-->

## 为什么现代前端框架这么快呢 ？

以 `react` 为例，使用了虚拟 `DOM`；

## 但是每次虚拟DOM转真实DOM不也是很浪费性能吗 ？

关键点在 `Diff` 算法这里，去对比新旧 `DOM` 树，而后通过补丁去 **更新到真实** `DOM` 上；

## 这个比对不是也很浪费时间吗 ？

正常情况下，比较两个树形 **结构差异** 的算法的 **时间复杂度** 是`O(N^3)`，这个效率显然是无法接受的。

`react` 通过总结 `DOM` 的实际使用场景提出了三个在绝大多数实践场景下都成立的假设。

1. 如果 **父节点** 不同，放弃对子节点的比较，直接 **删除旧节点** 然后 **添加新的节点重新渲染**；

2. 如果 **子节点有变化**，`Virtual DOM` **不会计算变化**的是什么，而是重新渲染;

3. 通过唯一的 `key` 策略

## PS 

1. 这里的 `n` 指的是页面的 `VDOM` 节点数，这个不太严谨。如果更严谨一点，我们应该应该假设 **变化之前** 的节点数为 `m`，**变化之后** 的节点数为 `n`。

2. `React` 和 `Vue` 做优化的前提是 **放弃了最优解**，本质上是一种权衡，有利有弊。